<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Yeu Cau 2</title>
</head>
<body>
<script>
    function checkEmail(){
        let check = true;
        diaChiEmail=prompt("Nhập địa chỉ email ");
        while (check){
            diaChiEmail=prompt("Nhập đúng định dạng @gmail.com ");
            for(var i=0; i<diaChiEmail.length; i++) {
                let a0 = diaChiEmail.length - 1
                let a1 = diaChiEmail.length - 2
                let a2 = diaChiEmail.length - 3
                let a3 = diaChiEmail.length - 4
                let a4 = diaChiEmail.length - 5
                let a5 = diaChiEmail.length - 6
                let a6 = diaChiEmail.length - 7
                let a7 = diaChiEmail.length - 8
                let a8 = diaChiEmail.length - 9
                let a9 = diaChiEmail.length - 10

                if (diaChiEmail[a0] != "m") {

                    break;
                } else if (diaChiEmail[a1] != "o"){
                    break;
                } else if (diaChiEmail[a2] != "c"){
                    break;
                } else if (diaChiEmail[a3] != "."){
                    break;
                } else if (diaChiEmail[a4] != "l"){
                    break;
                } else if (diaChiEmail[a5] != "i"){
                    break;
                } else if (diaChiEmail[a6] != "a"){
                    break;
                } else if (diaChiEmail[a7] != "m"){
                    break;
                } else if (diaChiEmail[a8] != "g"){
                    break;
                } else if (diaChiEmail[a9] != "@"){
                    break;

                }else {
                    check = false
                }
            }
        }
       return  diaChiEmail
    }

    function checkId(){
        let check = true;
        let soCMND;
        let a
       while (check){
            soCMND=prompt("Nhập số CMND ");
            for(var i=0; i<soCMND.length; i++){
                a=soCMND[i]
                if(isNaN(a)){
                    break;
                }else if (i==soCMND.length-1) {
                    check=false
                }
            }
       }
       return soCMND
    }

    function checkBirthday(){
        let check = true;
        let birthday;
        let a
        while (check){
            birthday=prompt("Nhập số ngày tháng năm sinh ");
            if(birthday.charAt(2)!="/" || birthday.charAt(5)!="/"){
                check=true
            }else {
                let day=birthday.substring(0,2);
                let month=birthday.substring(3,5);
                let year=birthday.substring(6,9);
                if(isNaN(day) || isNaN(month) || isNaN(year)){
                    check=true;
                }else {
                    day=Number.parseFloat(day);
                    month=Number.parseFloat(month);
                    year=Number.parseFloat(year);
                    if(!Number.isInteger(day) || !Number.isInteger(month) || !Number.isInteger(year)){
                        check=true;
                    }else {
                        if(day>31 || month>12 || year>9999) {
                            check=true;
                        }else {
                            check=false;
                        }

                    }
                }

            }
        }
        return birthday
    }

    function checkRenDay(){
        let check = true;
        let rentDay = 0;
        while (check){
            rentDay=prompt("Nhập số ngày thuê ");
            if(isNaN(rentDay)){
                check= true
            }else{
                rentDay=Number.parseFloat(rentDay);
                if(Number.isInteger(rentDay)){
                    if(rentDay>0){
                        check=false;
                    }
                    } else {
                    check=true;
                }
            }
        }
        return rentDay
    }

    function chuanHoaName(){
        let name = prompt("Nhập họ tên khách hàng ");
        name = name.trim().toLowerCase();
        let tempName = "";
        for (var i=0; i<name.length; i++){
            if(name.charAt(i)===" " && name.charAt(i+1)===" ") {
                continue;
            }
            if(i===0 || name.charAt(i-1)===" "){
                tempName+=name.charAt(i).toUpperCase();
                continue;
            }
            tempName+=name.charAt(i);

        }
        name=tempName
        return name
    }



    let name = chuanHoaName()
    let email = checkEmail();
    let id =checkId();
    let birthday = checkBirthday();
    let address = "qfwqf";
    let typeCustomer = "Gold";
    let discount = "5";
    let numberofaccompanying = "0";
    let typeroom = "Vip";
    let rentday = checkRenDay();
    let typeservice = "House";
    let moneyservice;
    let discountaddress;
    let discountrentday;
    let discounttypecustomer;
    let edit;

    while (1) {
        let receive = parseInt(prompt("1.Show information customer \n" +
            "2.Edit information customer \n" +
            "3.Show the amount to be paid after discount \n" +
            "4.Bạn hãy nhập số không nếu muốn thoát")) ;
        if (receive === 1) {
            alert("1.Ho va ten: " + name + "\n" +
                "2.So CMND: " + id + "\n" +
                "3.Ngay Sinh: " + birthday + "\n" +
                "4.Email: " + email + "\n" +
                "5.Dia chi: " + address + "\n" +
                "6.Loai khach hang: " + typeCustomer + "\n" +
                "7.Giam gia: " + discount + "\n" +
                "8.So luong di kem: " + numberofaccompanying + "\n" +
                "9.So ngay thue: " + rentday + "\n" +
                "10.Loai dich vu: " + typeservice + "\n" +
                "11.Loai phong: " + typeroom);
        } else if (receive === 2) {
            edit = parseInt(prompt("Chon thong tin muon thay doi: \n" +
                "1.Ho va ten: " + name + "\n" +
                "2.So CMND: " + id + "\n" +
                "3.Ngay Sinh: " + birthday + "\n" +
                "4.Email: " + email + "\n" +
                "5.Dia chi: " + address + "\n" +
                "6.Loai khach hang: " + typeCustomer + "\n" +
                "7.Giam gia: " + discount + "\n" +
                "8.So luong di kem: " + numberofaccompanying + "\n" +
                "9.So ngay thue: " + rentday + "\n" +
                "10.Loai dich vu: " + typeservice + "\n" +
                "11.Loai phong: " + typeroom));
            switch (edit) {
                case 1:
                    name = prompt("Nhap Vao Ten Khach Hang:");
                    break;
                case 2:
                    id = prompt("Nhap Vao CMND Khach Hang:");
                    break;
                case 3:
                    birthday = prompt("Nhap Vao Sinh Nhat Khach Hang:");
                    break;
                case 4:
                    email = prompt("Nhap Vao Email Khach Hang:");
                    break;
                case 5:
                    address = prompt("Nhap Vao Dia Chi Khach Hang:");
                    break;
                case 6:
                    typeCustomer = prompt("Nhap Vao Hang Khach Hang:");
                    break;
                case 7:
                    discount = prompt("Nhap Vao % Giam Gia:");
                    break;
                case 8:
                    numberofaccompanying = prompt("Nhap Vao So Nguoi Di Kem:");
                    break;
                case 9:
                    rentday = prompt("Nhap Vao So Ngay Thue:");
                    break;
                case 10:
                    typeservice = prompt("Nhap Vao Loai Dich Vu:");
                    break;
                case 11:
                    typeroom = prompt("Nhap Vao Loai Phong:");
                    break;
                default:
                    alert("Faild");
                    break;
            }
        } else if (receive === 3) {
            switch (typeservice) {
                case "House":
                    moneyservice = 300;
                    break;
                case "Villa":
                    moneyservice = 500;
                    break;
                case  "Room":
                    moneyservice = 100;
                    break;
            }
            switch (address) {
                case "Da Nang":
                    discountaddress = 20;
                    break;
                case "Hue":
                    discountaddress = 10;
                    break;
                case "Quang Nam":
                    discountaddress = 5;
                    break;
            }
            switch (typeCustomer) {
                case "Diamond":
                    discounttypecustomer = 15;
                    break;
                case "Platium":
                    discounttypecustomer = 10;
                    break;
                case "Gold":
                    discounttypecustomer = 5;
                    break;
                case "Silver":
                    discounttypecustomer = 2;
                    break;
                case "Member":
                    discounttypecustomer = 0;
                    break;
            }
            if (rentday >= 2 && rentday <= 4) {
                discountrentday = 10;
            } else if (rentday >= 5 && rentday <= 7) {
                discountrentday = 20;
            } else if (rentday > 7) {
                discountrentday = 30;
            }
            let discountmoney = discountaddress + discountrentday + discounttypecustomer;
            let paymoney = (moneyservice * rentday) - discountmoney;
            alert("the amount to be paid after discount: " + paymoney);
        } else if (receive === 0) {
            break ;
        }
        else {
            alert("Bạn hãy chọn các chức năng có trong trình đơn ");
        }
    }
</script>
</body>
</html>